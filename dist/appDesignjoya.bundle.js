(()=>{"use strict";var e={226:(e,t,n)=>{async function o(){try{const e="http://127.0.0.1:8000/api/consultar/tipos",t=await fetch(e);if(!t.ok)throw new Error("No se pudo obtener las categorias");return await t.json()}catch(e){return e}}async function d(e){try{let t="http://127.0.0.1:8000/api/joya/nueva";const n={method:"POST",headers:{"Content-Type":"aplication/json"},body:JSON.stringify(e)},o=await fetch(t,n);if(!o.ok)throw new Error("No se pudo obtener las categorias");return await o.json()}catch(e){return e}}n.d(t,{A:()=>d,I:()=>o})}},t={};function n(o){var d=t[o];if(void 0!==d)return d.exports;var a=t[o]={exports:{}};return e[o](a,a.exports,n),a.exports}n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e=n(226);let t=document.getElementById("btnNuevoElementoReceta"),o=document.getElementById("inputNombre"),d=document.getElementById("inputFoto"),a=document.getElementById("btn-guardar"),i=JSON.parse(sessionStorage.getItem("id-usuario"));function l(e){let t=!1;return""==document.getElementById(e).value&&(t=!0),t}function r(e){let t=!0;return e.children.length>0&&(t=!1),t}(0,e.I)().then((function(e){let t=document.getElementById("tipos-habilitados");console.log(e);for(let n=0;n<e.tipos.length;n++){const o=document.createElement("option");o.value=e.tipos[n].id,o.textContent=o.value+". "+e.tipos[n].nombre,t.appendChild(o)}})),o.addEventListener("input",(function(){l(o.id)?t.disabled=!0:t.disabled=!1,l(d.id)||l(o.id)?(t.disabled=!0,a.disabled=!0):r(document.getElementById("detalle-receta"))||(a.disabled=!1)})),d.addEventListener("input",(function(){l(d.id)?t.disabled=!0:t.disabled=!1,l(d.id)||l(o.id)?(t.disabled=!0,a.disabled=!0):r(document.getElementById("detalle-receta"))||(a.disabled=!1)})),a.addEventListener("click",(function(){let t=document.getElementById("detalle-receta"),n={};n.nombre=o.value,n.foto=d.value,n.id_usuario=i,n.detalle=[];for(let e=0;e<t.rows.length;e++){let o=t.rows[e],d=o.cells[1].textContent,a=o.cells[0].textContent,i={};i.cantidad=d,i.tipo=a.split(".")[0],n.detalle.push(i)}window.confirm("¿Estás seguro de que deseas guardar esta joya?")&&(console.log(JSON.stringify(n)),(0,e.A)(n).then((function(){document.getElementById("inputNombre").value="",document.getElementById("inputFoto").value="",window.location.href="listaJoyas.html"})))})),t.addEventListener("click",(function(){let e=document.getElementById("tipos-habilitados").value,t=document.getElementById("inputCantidad").value,n=[!0],o="";if((""==t||t.includes("-")||"0"==t)&&(o+=" Debe introducir una cantidad \n",n.push(!1)),0==e&&(o+=" Debe introducir elegir un tipo \n",n.push(!1)),n.includes(!1))alert(o);else{let e=document.getElementById("detalle-receta"),n=document.createElement("tr"),o=document.createElement("td"),d=document.createElement("span");d.textContent=t;let i=document.createElement("td"),l=document.getElementById("tipos-habilitados"),r=l.selectedIndex,s=l.options[r].textContent;l.options[r].disabled=!0,document.getElementById("opcion-default").selected=!0;let c=document.createElement("span");c.textContent=s,i.appendChild(c),o.appendChild(d),n.appendChild(i),n.appendChild(o),e.appendChild(n),a.disabled=!1}}))})()})();