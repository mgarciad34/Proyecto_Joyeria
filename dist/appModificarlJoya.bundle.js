(()=>{"use strict";var e={226:(e,t,n)=>{async function o(){try{const e="http://127.0.0.1:8000/api/consultar/tipos",t=await fetch(e);if(!t.ok)throw new Error("No se pudo obtener las categorias");return await t.json()}catch(e){return e}}async function a(e){try{let t="http://127.0.0.1:8000/api/joya/nueva";const n={method:"POST",headers:{"Content-Type":"aplication/json"},body:JSON.stringify(e)},o=await fetch(t,n);if(!o.ok)throw new Error("No se pudo obtener las categorias");return await o.json()}catch(e){return e}}n.d(t,{A:()=>a,I:()=>o})}},t={};function n(o){var a=t[o];if(void 0!==a)return a.exports;var d=t[o]={exports:{}};return e[o](d,d.exports,n),d.exports}n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e=n(226);let t=document.getElementById("btnNuevoElementoReceta"),o=document.getElementById("btn-guardar"),a=JSON.parse(sessionStorage.getItem("id-usuario"));(0,e.I)().then((function(e){let t=document.getElementById("tipos-habilitados");console.log(e);for(let n=0;n<e.tipos.length;n++){const o=document.createElement("option");o.value=e.tipos[n].id,o.textContent=o.value+". "+e.tipos[n].nombre,t.appendChild(o)}})),o.addEventListener("click",(function(){let t=document.getElementById("detalle-receta"),n={};n.nombre=inputNombre.value,n.foto=inputFoto.value,n.id_usuario=a,n.detalle=[];for(let e=0;e<t.rows.length;e++){let o=t.rows[e],a=o.cells[1].textContent,d=o.cells[0].textContent,i={};i.cantidad=a,i.tipo=d.split(".")[0],n.detalle.push(i)}window.confirm("¿Estás seguro de que deseas guardar esta joya?")&&(console.log(JSON.stringify(n)),(0,e.A)(n).then((function(){window.location.href="listaJoyas.html"})))})),t.addEventListener("click",(function(){let e=document.getElementById("tipos-habilitados").value,t=document.getElementById("inputCantidad").value,n=[!0],a="";if((""==t||t.includes("-")||"0"==t)&&(a+=" Debe introducir una cantidad \n",n.push(!1)),0==e&&(a+=" Debe introducir elegir un tipo \n",n.push(!1)),n.includes(!1))alert(a);else{let e=document.getElementById("detalle-receta"),n=document.createElement("tr"),a=document.createElement("td"),d=document.createElement("span");d.textContent=t;let i=document.createElement("td"),l=document.getElementById("tipos-habilitados"),r=l.selectedIndex,s=l.options[r].textContent;l.options[r].disabled=!0,document.getElementById("opcion-default").selected=!0;let c=document.createElement("span");c.textContent=s,i.appendChild(c),a.appendChild(d),n.appendChild(i),n.appendChild(a),e.appendChild(n),o.disabled=!1}}))})()})();