(()=>{"use strict";var e={574:(e,t,n)=>{async function a(e){try{const t=await fetch("http://127.0.0.1:8000/api/recetas/"+e);if(!t.ok)throw new Error("No se pudo obtener las joyas");return await t.json()}catch(e){return!1}}async function o(e,t){let n={};n.id_usuario=t;try{let t="http://127.0.0.1:8000/api/joya/fabricar/"+e;const a={method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)},o=await fetch(t,a);if(!o.ok)throw new Error("No se pudo fabricar la joya");return await o.json()}catch(e){return e}}async function r(e,t){try{let n="http://127.0.0.1:8000/api/joyas/owner/"+e+"/"+t;const a={method:"GET",headers:{"Content-Type":"application/json"}},o=await fetch(n,a);if(!o.ok)throw new Error("No se pudo obtener el valor");return await o.json()}catch(e){return e}}async function d(e){try{let t="http://127.0.0.1:8000/api/joyas/eliminar/"+e;const n={method:"DELETE",headers:{"Content-Type":"aplication/json"}},a=await fetch(t,n);if(!a.ok)throw new Error("No se pudo obtener las categorias");return await a.json()}catch(e){return e}}n.d(t,{D:()=>d,SD:()=>a,gU:()=>o,mF:()=>r})}},t={};function n(a){var o=t[a];if(void 0!==o)return o.exports;var r=t[a]={exports:{}};return e[a](r,r.exports,n),r.exports}n.d=(e,t)=>{for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e=n(574);let t=JSON.parse(sessionStorage.getItem("joya-guardada")),a=JSON.parse(sessionStorage.getItem("id-usuario")),o=document.getElementById("botones"),r=document.getElementById("btnFabricar"),d=!0;(0,e.SD)(t).then((function(e){!function(e){let t=document.getElementById("tabla_receta");for(let n=0;n<e.detalle.length;n++){console.log(e.detalle[n]);let a=document.createElement("tr"),o=document.createElement("td"),i=document.createElement("span");i.textContent=e.detalle[n].id_componente;let c=document.createElement("td"),l=document.createElement("span");l.textContent=e.detalle[n].tipo;let s=document.createElement("td"),u=document.createElement("span");u.textContent=e.detalle[n].cantidad_necesaria;let p=document.createElement("td"),m=document.createElement("span");m.textContent=e.detalle[n].cantidad_disponible,e.detalle[n].cantidad_disponible<e.detalle[n].cantidad_necesaria&&(m.style.color="red",d=!1,r.disabled=!0),o.appendChild(i),c.appendChild(l),s.appendChild(u),p.appendChild(m),a.appendChild(o),a.appendChild(c),a.appendChild(s),a.appendChild(p),t.appendChild(a)}}(e)})),(0,e.mF)(t,a).then((function(n){console.log(n),n.resultado&&function(){let n=document.createElement("td"),a=document.createElement("button");a.textContent="Eliminar",a.setAttribute("id",t),a.style.backgroundColor=" red",a.addEventListener("click",(function(n){confirm("¿Estas seguro que deseas eliminar esta joya? ")&&(0,e.D)(t).then((function(){window.location.href="./listaJoyas.html"}))}));let r=document.createElement("td"),d=document.createElement("button");d.textContent="Modificar",d.setAttribute("id",t),d.style.backgroundColor=" orange",d.addEventListener("click",(function(e){sessionStorage.setItem("joya-guardada",JSON.parse(d.id)),window.location.href="./modificarJoya.html"})),n.appendChild(a),r.appendChild(d),o.appendChild(n),o.appendChild(r)}()})),r.addEventListener("click",(function(){d?confirm("¿Estás seguro de que deseas continuar?")&&(0,e.gU)(t,a).then((function(e){window.location.reload()})):alert("Recursos insuficientes")}))})()})();