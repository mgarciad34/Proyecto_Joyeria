(()=>{"use strict";let e=document.getElementById("barra_busqueda"),t=document.getElementById("opciones-filtrado"),n=document.getElementById("filtro-fecha");t.value=1,e.value="";let a=t.value;function l(e){let t,a=document.getElementById("barra_busqueda");t=3==e?n.value:a.value;let l=0,d=document.getElementById("tabla_historial");for(let n=0;n<d.rows.length;n++)""==t?(d.rows[n].style.display="",l++):d.rows[n].cells[e].textContent!=t?d.rows[n].style.display="none":l++;document.getElementById("tabla-alerta").style.display=0==l?"":"none"}(async function(){try{const e=await fetch("http://127.0.0.1:8000/api/joyas/historial");if(!e.ok)throw new Error("No se pudo obtener las joyas");return await e.json()}catch(e){return!1}})().then((function(e){!function(e){var t=document.getElementById("tabla_historial");console.log(e);for(let n=0;n<e.historial.length;n++){let a=document.createElement("tr"),l=document.createElement("td"),d=document.createElement("span");d.textContent=e.historial[n].id;let o=document.createElement("td"),i=document.createElement("span");i.textContent=e.historial[n].id_joya;let r=document.createElement("td"),s=document.createElement("span");s.textContent=e.historial[n].creado;let c=document.createElement("td"),u=document.createElement("span");u.textContent=e.historial[n].id_usuario,l.appendChild(d),r.appendChild(s),c.appendChild(u),o.appendChild(i),a.appendChild(l),a.appendChild(o),a.appendChild(c),a.appendChild(r),t.appendChild(a)}}(e[0])})),t.addEventListener("change",(function(){a=t.value,3==a?(n.style.display="",n.value="",e.style.display="none"):(n.style.display="none",e.style.display="",e.value=""),l(a)})),n.addEventListener("input",(function(){l(a)})),e.addEventListener("input",(function(){l(a)}))})();